<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EquipLink Marketplace</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="main-header">
        <div class="logo-container">
            <div class="logo-icon">ü©∫</div>
            <h1 class="site-title">EquipLink</h1>
        </div>
        <nav class="main-nav">
            <button id="nav-catalog" class="nav-button active">Cat√°logo</button>
            <button id="nav-auth" class="nav-button">Iniciar Sesi√≥n / Registrar</button>
            <button id="nav-admin-dashboard" class="nav-button hidden">Panel Admin</button>
            <button id="nav-provider-dashboard" class="nav-button hidden">Panel Proveedor</button>
            <button id="nav-client-dashboard" class="nav-button hidden">Panel Cliente</button>
            <button id="nav-logout" class="nav-button hidden">Cerrar Sesi√≥n</button>
        </nav>
    </header>

    <main>
        <div class="presentation-section">
            <div class="presentation-content">
                <h2>Soluciones en Equipos M√©dicos</h2>
                <p>Encuentra, compara y gestiona equipos m√©dicos de manera profesional y segura.</p>
            </div>
        </div>
        <div id="loading-spinner" class="spinner hidden"></div>
        <div id="error-message" class="error-container hidden"></div>

        <!-- Cat√°logo de Equipos -->
        <section id="catalog-page" class="page">
            <h2>Cat√°logo de Equipos</h2>
            <div id="search-filters" class="filters-container">
                <h3>Filtros de b√∫squeda</h3>
                <div class="filter-row">
                    <input type="text" id="filter-name" placeholder="Buscar por nombre...">
                    <select id="filter-type">
                        <option value="">Todos los tipos</option>
                    </select>
                    <select id="filter-state">
                        <option value="">Todos los estados</option>
                    </select>
                    <select id="filter-company">
                        <option value="">Todas las empresas</option>
                    </select>
                    <select id="filter-brand">
                        <option value="">Todas las marcas</option>
                    </select>
                    <button id="apply-filters-btn" class="btn">Buscar</button>
                    <button id="clear-filters-btn" class="btn">Limpiar</button>
                </div>
            </div>
            <div id="equipment-list" class="equipment-grid">
                <!-- Ejemplo de card de equipo m√©dico -->
                <div class="equipment-card">
                    <img src="https://images.unsplash.com/photo-1519494026892-80bbd2d6fd2e?auto=format&fit=crop&w=400&q=80" alt="Equipo M√©dico" class="equipment-card-img">
                    <div class="equipment-card-title">Monitor de Signos Vitales</div>
                    <div class="equipment-card-details">Marca: Philips<br>Tipo: Monitor<br>Estado: Nuevo</div>
                    <div class="equipment-card-price">$12,500 MXN</div>
                    <button class="btn">Ver Detalles</button>
                </div>
                <!-- Repite este bloque din√°micamente con JS para cada equipo -->
            </div>
        </section>

        <!-- Detalle de Equipo -->
        <section id="equipment-detail-page" class="page hidden">
            <button id="back-to-catalog" class="btn">‚Üê Volver al Cat√°logo</button>
            <div id="equipment-detail-content">
                <!-- Detalles del equipo se cargar√°n aqu√≠ -->
            </div>
            <div id="reviews-section">
                <h3>Rese√±as</h3>
                <div id="reviews-list"></div>
                <h4>Dejar una Rese√±a</h4>
                <div id="review-form-container" class="hidden">
                    <div class="star-rating-input">
                        <span class="star" data-value="1">&#9733;</span>
                        <span class="star" data-value="2">&#9733;</span>
                        <span class="star" data-value="3">&#9733;</span>
                        <span class="star" data-value="4">&#9733;</span>
                        <span class="star" data-value="5">&#9733;</span>
                        <input type="number" id="review-star-value" min="1" max="5" placeholder="Estrellas (1-5)" required style="display:none;">
                    </div>
                    <textarea id="review-body" placeholder="Escribe tu rese√±a aqu√≠..."></textarea>
                    <button id="submit-review-btn" class="btn">Enviar Rese√±a</button>
                </div>
                <p id="review-login-prompt" class="hidden">Debes iniciar sesi√≥n como cliente para dejar una rese√±a.</p>
            </div>
        </section>

        <!-- P√°gina de Login / Registro -->
        <section id="auth-page" class="page hidden">
            <h2>Iniciar Sesi√≥n / Registrar</h2>
            <div class="auth-forms">
                <div class="auth-form">
                    <h3>Iniciar Sesi√≥n</h3>
                    <form id="login-form">
                        <input type="email" id="login-email" placeholder="Email" required>
                        <input type="password" id="login-password" placeholder="Contrase√±a" required>
                        <button type="submit" class="btn">Iniciar Sesi√≥n</button>
                    </form>
                </div>
                <div class="auth-form">
                    <h3>Registrar</h3>
                    <form id="register-form">
                        <input type="text" id="register-fullname" placeholder="Nombre Completo" required>
                        <input type="email" id="register-email" placeholder="Email" required>
                        <input type="password" id="register-password" placeholder="Contrase√±a" required>
                        <select id="register-usertype" required>
                            <option value="">Selecciona tipo de usuario</option>
                            <option value="cliente">Cliente</option>
                            <option value="proveedor">Proveedor</option>
                        </select>
                        <!-- MODIFICADO: Campos para proveedor - ahora solo selecciona empresa -->
                        <div id="provider-fields" class="hidden">
                            <h4>Selecciona tu Empresa</h4>
                            <select id="provider-company-id" required>
                                <option value="">Selecciona una empresa</option>
                            </select>
                        </div>
                        <button type="submit" class="btn">Registrar</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- NUEVO: Panel de Administrador -->
        <section id="admin-dashboard-page" class="page hidden">
            <h2>Panel de Administrador</h2>
            <div class="dashboard-tabs">
                <button class="tab-button active" data-tab="admin-companies">Empresas</button>
                <button class="tab-button" data-tab="admin-brands">Marcas</button>
            </div>

            <div id="admin-companies-tab" class="tab-content">
                <h3>Gesti√≥n de Empresas</h3>
                <button id="add-company-btn" class="btn">A√±adir Nueva Empresa</button>
                <div id="companies-list" class="list-container"></div>
            </div>

            <div id="admin-brands-tab" class="tab-content hidden">
                <h3>Gesti√≥n de Marcas</h3>
                <button id="add-brand-btn" class="btn">A√±adir Nueva Marca</button>
                <div id="brands-list" class="list-container"></div>
            </div>
        </section>

        <!-- Panel de Proveedor -->
        <section id="provider-dashboard-page" class="page hidden">
            <h2>Panel de Proveedor</h2>
            <div class="dashboard-tabs">
                <button class="tab-button active" data-tab="provider-equipment">Mis Equipos</button>
                <button class="tab-button" data-tab="provider-company">Mi Empresa</button>
            </div>

            <div id="provider-equipment-tab" class="tab-content">
                <h3>Mis Equipos</h3>
                <button id="add-equipment-btn" class="btn">A√±adir Nuevo Equipo</button>
                <div id="my-equipment-list" class="grid-container"></div>
            </div>

            <div id="provider-company-tab" class="tab-content hidden">
                <h3>Informaci√≥n de mi Empresa</h3>
                <div id="company-details-view">
                    <p><strong>Nombre:</strong> <span id="view-company-name"></span></p>
                    <p><strong>Email:</strong> <span id="view-company-email"></span></p>
                    <p><strong>Tel√©fono:</strong> <span id="view-company-phone"></span></p>
                    <p><strong>Direcci√≥n:</strong> <span id="view-company-address"></span></p>
                    <p><strong>Web:</strong> <span id="view-company-website"></span></p>
                    <h4>Marcas asociadas</h4>
                    <div id="company-brands-list"></div>
                </div>
            </div>
        </section>

        <!-- Panel de Cliente -->
        <section id="client-dashboard-page" class="page hidden">
            <h2>Panel de Cliente</h2>
            <div class="dashboard-tabs">
                <button class="tab-button active" data-tab="client-favorites">Mis Favoritos</button>
                <button class="tab-button" data-tab="client-reviews">Mis Rese√±as</button>
            </div>
            <div id="client-favorites-tab" class="tab-content">
                <h3>Mis Equipos Favoritos</h3>
                <div id="my-favorites-list" class="grid-container"></div>
            </div>
            <div id="client-reviews-tab" class="tab-content hidden">
                <h3>Mis Rese√±as</h3>
                <div id="my-reviews-list"></div>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>EquipLink</h3>
                <p>Marketplace de equipos m√©dicos. Soluciones para hospitales, cl√≠nicas y profesionales de la salud.</p>
            </div>
            <div class="footer-section">
                <h4>Contacto</h4>
                <p>Email: contacto@equiplink.com</p>
                <p>Tel√©fono: +52 55 1234 5678</p>
            </div>
            <div class="footer-section">
                <h4>Enlaces</h4>
                <ul>
                    <li><a href="#catalog-page">Cat√°logo</a></li>
                    <li><a href="#auth-page">Acceso</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">&copy; 2025 EquipLink. Todos los derechos reservados.</div>
    </footer>

    <!-- Modals (pop-ups) -->

    <!-- Modal para A√±adir/Editar Empresa (NUEVO) -->
    <div id="company-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button">√ó</span>
            <h3 id="company-modal-title">A√±adir Empresa</h3>
            <form id="company-form">
                <input type="hidden" id="company-id">
                <input type="text" id="company-name" placeholder="Nombre de la Empresa" required>
                <input type="email" id="company-email" placeholder="Email de la Empresa">
                <input type="text" id="company-phone" placeholder="Tel√©fono">
                <input type="text" id="company-address" placeholder="Direcci√≥n">
                <input type="url" id="company-website" placeholder="Sitio Web">
                <button type="submit" class="btn">Guardar Empresa</button>
            </form>
        </div>
    </div>

    <!-- Modal para Gestionar Marcas de Empresa (NUEVO) -->
    <div id="manage-company-brands-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button">√ó</span>
            <h3>Gestionar Marcas de <span id="manage-brands-company-name"></span></h3>
            <input type="hidden" id="manage-brands-company-id">
            
            <h4>Marcas Asociadas</h4>
            <div id="manage-brands-list" class="list-container"></div>
            
            <h4>Asociar Nueva Marca</h4>
            <form id="associate-brand-form">
                <select id="select-brand-to-associate" required>
                    <option value="">Selecciona una marca</option>
                </select>
                <button type="submit" class="btn">Asociar Marca</button>
            </form>
        </div>
    </div>

    <!-- Modal para A√±adir/Editar Equipo -->
    <div id="equipment-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button">√ó</span>
            <h3 id="equipment-modal-title">A√±adir Equipo</h3>
            <form id="equipment-form">
                <input type="hidden" id="equipment-id">
                <input type="text" id="equipment-name" placeholder="Nombre del Equipo" required>
                <textarea id="equipment-description" placeholder="Descripci√≥n"></textarea>
                <input type="number" id="equipment-price" step="0.01" placeholder="Precio" required>
                <input type="url" id="equipment-url-image" placeholder="URL de la Imagen del Equipo"> 
                <select id="equipment-type-id" required>
                    <option value="">Selecciona Tipo de Equipo</option>
                </select>
                <select id="equipment-state-id" required>
                    <option value="">Selecciona Estado del Equipo</option>
                </select>
                <select id="equipment-brand-id" required>
                    <option value="">Selecciona Marca</option>
                </select>
                <button type="submit" class="btn">Guardar Equipo</button>
            </form>
        </div>
    </div>

    <!-- Modal para A√±adir/Editar Marca -->
    <div id="brand-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button">√ó</span>
            <h3 id="brand-modal-title">A√±adir Marca</h3>
            <form id="brand-form">
                <input type="hidden" id="brand-id">
                <input type="text" id="brand-name" placeholder="Nombre de la Marca" required>
                <button type="submit" class="btn">Guardar Marca</button>
            </form>
        </div>
    </div>

<script src="script.js"></script>
<script>
// Sistema de estrellas visual para rese√±as
document.addEventListener('DOMContentLoaded', function() {
  const starInputs = document.querySelectorAll('.star-rating-input');
  starInputs.forEach(function(starInput) {
    const stars = starInput.querySelectorAll('.star');
    const hiddenInput = starInput.querySelector('input[type="number"]');
    stars.forEach(function(star, idx) {
      star.addEventListener('click', function() {
        stars.forEach((s, i) => {
          if (i <= idx) {
            s.classList.add('selected');
          } else {
            s.classList.remove('selected');
          }
        });
        hiddenInput.value = idx + 1;
      });
      star.addEventListener('mouseover', function() {
        stars.forEach((s, i) => {
          if (i <= idx) {
            s.classList.add('hovered');
          } else {
            s.classList.remove('hovered');
          }
        });
      });
      star.addEventListener('mouseout', function() {
        stars.forEach((s, i) => {
          s.classList.remove('hovered');
        });
      });
    });
  });

  // Ejemplo de render din√°mico de cards (puedes reemplazar por tu l√≥gica real)
  const equipos = [
    {
      nombre: 'Monitor de Signos Vitales',
      marca: 'Philips',
      tipo: 'Monitor',
      estado: 'Nuevo',
      precio: '$12,500 MXN',
      imagen: 'https://images.unsplash.com/photo-1519494026892-80bbd2d6fd2e?auto=format&fit=crop&w=400&q=80'
    },
    {
      nombre: 'Electrocardi√≥grafo',
      marca: 'GE Healthcare',
      tipo: 'Diagn√≥stico',
      estado: 'Usado',
      precio: '$8,900 MXN',
      imagen: 'https://images.unsplash.com/photo-1505751172876-fa1923c5c528?auto=format&fit=crop&w=400&q=80'
    },
    {
      nombre: 'Bomba de Infusi√≥n',
      marca: 'Baxter',
      tipo: 'Terapia',
      estado: 'Nuevo',
      precio: '$5,200 MXN',
      imagen: 'https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80'
    }
  ];
  const equipmentList = document.getElementById('equipment-list');
  if (equipmentList) {
    equipmentList.innerHTML = '';
    equipos.forEach(equipo => {
      const card = document.createElement('div');
      card.className = 'equipment-card';
      card.innerHTML = `
        <img src="${equipo.imagen}" alt="${equipo.nombre}" class="equipment-card-img">
        <div class="equipment-card-title">${equipo.nombre}</div>
        <div class="equipment-card-details">Marca: ${equipo.marca}<br>Tipo: ${equipo.tipo}<br>Estado: ${equipo.estado}</div>
        <div class="equipment-card-price">${equipo.precio}</div>
        <button class="btn">Ver Detalles</button>
      `;
      equipmentList.appendChild(card);
    });
  }
});
</script>
</body>
</html>